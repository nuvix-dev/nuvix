import { defineConfig } from 'tsup'

function printStylizedNuvix() {
  const logo = `
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*+=========+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@========================@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@+===============================@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@=====================================+@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@+==========================================+@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@+==============================================+@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@+===================+*+===========================*=+=======++@@@
@@@@@@@@@@@@@+===============+@@@@@@@@@@@@@==========================@@@@@@+@@@@
@@@@@@@@@@@@+==============+@@@@@@@@@@@@@@@@@+===================@@@@@@@@+++@@@@
@@@@@@@@@@@+=============+@@@@@@@@@@@@@@@@@@@@@==============+@@@@@@@@@@++*@@@@@
@@@@@@@@@@@==============@@@@@@@@@@@@@@@@@@@@@@@+==========@@@@@@@@@@@@+++@@@@@@
@@@@@@@@@@=============@@@@@@@@@@@@@=+@@@@@@@@@@@@=======@@@@@@@@@@@@*+++@@@@@@@
@@@@@@@@@============*@@@@@@@@@@@@=====@@@@@@@@@@@@*===*@@@@@@@@@@@@+++*@@@@@@@@
@@@@@@@@@===========@@@@@@@@@@@@@=======+@@@@@@@@@@===@@@@@@@@@@@@+++++@@@@@@@@@
@@@@@@@@@==========@@@@@@@@@@@@@@@+======+@@@@@@@====@@@@@@@@@@@@++++++@@@@@@@@@
@@@@@@@@@========+@@@@@@@@@@@@@@@@@@=======@@@@@===+@@@@@@@@@@@@+++++++@@@@@@@@@
@@@@@@@@@=======@@@@@@@@@@@@@@@@@@@@@=======@@-===@@@@@@@@@@@@+++++++++@@@@@@@@@
@@@@@@@@@======@@@@@@@@@@@@@@@@@@@@@@@+======+==+@@@@@@@@@@@@++++++++++@@@@@@@@@
@@@@@@@@@====+@@@@@@@@@@@@+*@@@@@@@@@@@*=======+@@@@@@@@@@@@+++++++++++@@@@@@@@@
@@@@@@@@+===@@@@@@@@@@@@@+++*@@@@@@@@@@@@=====@@@@@@@@@@@@%++++++++++++@@@@@@@@@
@@@@@@@+==+@@@@@@@@@@@@+++++++@@@@@@@@@@@@@=@@@@@@@@@@@@@+++++++++++++@@@@@@@@@@
@@@@@@+==@@@@@@@@@@@@+++++++++++@@@@@@@@@@@@@@@@@@@@@@@++++++++++++++@@@@@@@@@@@
@@@@@+==@@@@@@@@@@*++++++++++++++@@@@@@@@@@@@@@@@@@@@@+++++++++++++++@@@@@@@@@@@
@@@@+==@@@@@@@@%+++++++++++++++++++@@@@@@@@@@@@@@@@@*++++++++++++++*@@@@@@@@@@@@
@@@@=@@@@@@*+++++++++++++++++++++++++@@@@@@@@@@@@@+++++++++++++++++@@@@@@@@@@@@@
@@@++++++++++*@++++++++++++++++++++++++++++**++++++++++++++++++++%@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@++++++++++++++++++++++++++++++++++++++++++++++++@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@#++++++++++++++++++++++++++++++++++++++++++*@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@++++++++++++++++++++++++++++++++++++++@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@++++++++++++++++++++++++++++++++@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@++++++++++++++++++++++++@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*+++++++++#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
`
  console.log('\x1b[38;2;131;189;194m' + logo + '\x1b[0m')
}

export default defineConfig(options => {
  printStylizedNuvix()

  return {
    entry: ['src/main.ts'],
    format: ['cjs', 'esm'],
    dts: false,
    sourcemap: true,
    clean: !!!options.watch,
    outDir: '../../dist/server',
    noExternal: [],
    splitting: false,
    minify: true,
    target: 'es2024',
    skipNodeModulesBundle: true,
    shims: true,
    tsconfig: './tsconfig.app.json',
  }
})
